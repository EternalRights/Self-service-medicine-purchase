import{_ as x,c as y,a as v,b as k,d as e,w as n,e as B,r as t,u as U,f as A,g as S,h as $,E as _,o as C,i as h}from"./index-BRfkWvBv.js";import{u as N,m as w,a as L,r as V}from"./index-DmUhJQUk.js";const T={setup(){const l=$(),a=U(),s=A({account:"",password:""}),o={account:{required:V,minLength:L(3),maxLength:w(20)},password:{required:V,minLength:L(6),maxLength:w(20)}},d=N(o,s),r=S(!1);return{form:s,v$:d,loading:r,handleAdminLogin:async()=>{if(await d.value.$validate()){r.value=!0;try{await a.adminLogin({account:s.account,password:s.password}),_.success("管理员登录成功"),l.push("/admin/dashboard")}catch(m){_.error("登录失败: "+(m.message||"账号或密码错误"))}finally{r.value=!1}}},goToUserLogin:()=>{l.push("/auth/login")}}}},E={class:"admin-login-container"},M={class:"admin-login-card"},q={class:"login-footer"};function I(l,a,s,o,d,r){const c=t("el-input"),i=t("el-form-item"),f=t("el-button"),m=t("el-link"),b=t("el-form");return C(),y("div",E,[v("div",M,[a[4]||(a[4]=k('<div class="admin-login-header" data-v-59fc7c82><div class="brand" data-v-59fc7c82><div class="logo" data-v-59fc7c82><i class="el-icon-first-aid-kit" data-v-59fc7c82></i></div><h1 data-v-59fc7c82>欢迎使用医药自助购 - 管理平台</h1></div><p class="subtitle" data-v-59fc7c82>安全、专业的药店智能管理系统</p></div>',1)),e(b,{class:"admin-login-form",onSubmit:B(o.handleAdminLogin,["prevent"])},{default:n(()=>{var p,g;return[e(i,{error:(p=o.v$.account.$errors[0])==null?void 0:p.$message},{default:n(()=>[e(c,{modelValue:o.form.account,"onUpdate:modelValue":a[0]||(a[0]=u=>o.form.account=u),placeholder:"请输入管理员账号","prefix-icon":"User",onBlur:o.v$.account.$touch},null,8,["modelValue","onBlur"])]),_:1},8,["error"]),e(i,{error:(g=o.v$.password.$errors[0])==null?void 0:g.$message},{default:n(()=>[e(c,{modelValue:o.form.password,"onUpdate:modelValue":a[1]||(a[1]=u=>o.form.password=u),type:"password",placeholder:"请输入登录密码","prefix-icon":"Lock","show-password":"",onBlur:o.v$.password.$touch},null,8,["modelValue","onBlur"])]),_:1},8,["error"]),e(i,null,{default:n(()=>[e(f,{type:"primary",class:"admin-login-btn",loading:o.loading,"native-type":"submit"},{default:n(()=>[...a[2]||(a[2]=[h(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),v("div",q,[e(m,{type:"primary",onClick:o.goToUserLogin},{default:n(()=>[...a[3]||(a[3]=[h("返回用户登录",-1)])]),_:1},8,["onClick"])])]}),_:1},8,["onSubmit"])])])}const z=x(T,[["render",I],["__scopeId","data-v-59fc7c82"]]);export{z as default};
