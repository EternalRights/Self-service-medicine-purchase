import{_ as T,h as F,z as I,p as q,r as c,J as p,o as n,w as l,a,d as s,C as O,e as v,q as C,K as L,i as y,G as x,L as A,g as S,c as _,M as z,N as H,O as M}from"./index-2sORtH0Y.js";import{n as N}from"./no-drugs-DbQaxHLo.js";import{u as R}from"./drug-BIpiyj54.js";import"./cart-BuHvw377.js";import"./notification-CM3_SFil.js";const U={class:"image-container"},j={class:"image-error"},E={class:"drug-name"},G={class:"drug-spec"},J={class:"price-section"},K={class:"price"},Q={class:"stock"},W={class:"action-buttons"},X={class:"detail-button"},Y={__name:"DrugCard",props:{drug:{type:Object,required:!0}},emits:["add-to-cart","consult-pharmacist"],setup(o,{emit:r}){const d=o,m=F(),h=I(),b=q(()=>h.isOpen),k=r,u=()=>{m.push({name:"DrugDetail",params:{id:d.drug.id}})},$=e=>{!e.target.closest(".action-buttons")&&!e.target.closest(".view-detail-btn")&&u()},D=e=>{e.stopPropagation(),k("add-to-cart",d.drug)},g=e=>{e.stopPropagation(),k("consult-pharmacist",d.drug)};return(e,t)=>{const f=c("el-icon"),V=c("el-image"),i=c("el-tag"),w=c("el-button"),B=c("el-card");return n(),p(B,{class:"drug-card",shadow:"hover",onClick:$},{default:l(()=>{var P;return[a("div",U,[s(V,{src:o.drug.image||C(N),fit:"cover",class:"drug-image",onClick:v(u,["stop"])},{error:l(()=>[a("div",j,[s(f,null,{default:l(()=>[s(C(L))]),_:1}),t[0]||(t[0]=a("span",null,"图片加载失败",-1))])]),_:1},8,["src"]),o.drug.category===2?(n(),p(i,{key:0,type:"danger",class:"prescription-tag"},{default:l(()=>[...t[1]||(t[1]=[y(" 处方药 ",-1)])]),_:1})):o.drug.category===1?(n(),p(i,{key:1,type:"success",class:"otc-tag"},{default:l(()=>[...t[2]||(t[2]=[y(" 非处方药 ",-1)])]),_:1})):O("",!0)]),a("div",{class:"drug-info",onClick:v(u,["stop"])},[a("h3",E,x(o.drug.generic_name),1),a("p",G,x(o.drug.specification),1),a("div",J,[a("span",K,"¥"+x(((P=o.drug.price)==null?void 0:P.toFixed(2))||"0.00"),1),a("span",Q,"剩余"+x(o.drug.stock_quantity)+"件",1)])]),a("div",W,[o.drug.category===1?(n(),p(w,{key:0,type:"primary",disabled:!b.value||o.drug.stock_quantity<=0,onClick:v(D,["stop"])},{default:l(()=>[...t[3]||(t[3]=[y(" 加入购物车 ",-1)])]),_:1},8,["disabled"])):O("",!0),o.drug.category===2?(n(),p(w,{key:1,type:"info",disabled:!b.value||o.drug.stock_quantity<=0,onClick:v(g,["stop"])},{default:l(()=>[...t[4]||(t[4]=[y(" 咨询药师 ",-1)])]),_:1},8,["disabled"])):O("",!0)]),a("div",X,[s(w,{type:"text",class:"view-detail-btn",onClick:v(u,["stop"])},{default:l(()=>[t[5]||(t[5]=y(" 查看详情 ",-1)),s(f,null,{default:l(()=>[s(C(A))]),_:1})]),_:1})])]}),_:1})}}},Z=T(Y,[["__scopeId","data-v-345a9fa3"]]),tt={class:"drug-list-container"},et={class:"filter-section"},st={class:"filter-item"},at={class:"filter-item"},ot={key:0,class:"loading-container"},lt={key:1,class:"empty-container"},nt=["src"],rt={key:2,class:"drug-grid"},it={__name:"DrugList",setup(o){const r=R(),d=S("default"),m=S("all"),h=S(!0);r.fetchDrugs().finally(()=>{h.value=!1});const b=()=>{r.setSortOption(d.value)},k=()=>{r.setCategoryFilter(m.value)},u=g=>{r.addToCart(g)},$=g=>{r.consultPharmacist(g)},D=q(()=>r.filteredDrugs);return(g,e)=>{const t=c("el-option"),f=c("el-select"),V=c("el-icon");return n(),_("div",tt,[a("div",et,[a("div",st,[e[2]||(e[2]=a("span",{class:"filter-label"},"排序方式：",-1)),s(f,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=i=>d.value=i),placeholder:"默认排序",onChange:b},{default:l(()=>[s(t,{label:"默认排序",value:"default"}),s(t,{label:"价格从低到高",value:"price_asc"}),s(t,{label:"价格从高到低",value:"price_desc"})]),_:1},8,["modelValue"])]),a("div",at,[e[3]||(e[3]=a("span",{class:"filter-label"},"药品分类：",-1)),s(f,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=i=>m.value=i),placeholder:"全部药品",onChange:k},{default:l(()=>[s(t,{label:"全部药品",value:"all"}),s(t,{label:"非处方药(OTC)",value:1}),s(t,{label:"处方药(Rx)",value:2}),s(t,{label:"医疗器械",value:3}),s(t,{label:"保健养生",value:4})]),_:1},8,["modelValue"])])]),h.value?(n(),_("div",ot,[s(V,{class:"is-loading",size:50},{default:l(()=>[s(C(z))]),_:1}),e[4]||(e[4]=a("p",null,"加载中...",-1))])):D.value.length===0?(n(),_("div",lt,[a("img",{src:C(N),alt:"无药品",class:"empty-image"},null,8,nt),e[5]||(e[5]=a("p",{class:"empty-text"},"没有找到符合条件的药品",-1))])):(n(),_("div",rt,[(n(!0),_(H,null,M(D.value,i=>(n(),p(Z,{key:i.id,drug:i,onAddToCart:u,onConsultPharmacist:$},null,8,["drug"]))),128))]))])}}},dt=T(it,[["__scopeId","data-v-7bf6ca22"]]),ct={class:"home-container"},ut={__name:"Home",setup(o){return(r,d)=>(n(),_("div",ct,[s(dt)]))}},vt=T(ut,[["__scopeId","data-v-81866f21"]]);export{vt as default};
