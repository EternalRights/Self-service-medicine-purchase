import{_ as V,z as I,c as m,a as s,d as o,w as n,r as d,G as c,q as a,h as B,o as p,i as r,C as S,Q as N}from"./index-BRfkWvBv.js";import{u as Q}from"./cart-BX6S-Glw.js";import{n as y}from"./no-drugs-DbQaxHLo.js";import"./notification-DqAp0EGn.js";const $={class:"cart-container"},z={class:"header-section"},A={class:"cart-stats"},D={class:"stat-item"},F={class:"stat-item"},T={key:0,class:"cart-table"},U={class:"drug-info"},E={class:"drug-details"},G={class:"drug-name"},H={class:"drug-spec"},M={key:0,class:"prescription-tag"},O={class:"drug-price"},R={class:"quantity-control"},j={class:"stock-info"},J={class:"subtotal"},K={key:1,class:"empty-cart"},L=["src"],P={class:"checkout-section"},W={__name:"Cart",setup(X){const i=Q(),f=I(),g=B(),v=()=>{g.go(-1)},k=()=>{g.push("/user/home")};return(Y,e)=>{const u=d("el-button"),h=d("el-image"),b=d("el-tag"),_=d("el-table-column"),C=d("el-input"),q=d("el-tooltip"),x=d("el-table");return p(),m("div",$,[s("div",z,[o(u,{icon:"Back",onClick:v},{default:n(()=>[...e[0]||(e[0]=[r("返回",-1)])]),_:1}),e[1]||(e[1]=s("h1",{class:"cart-title"},"购物车",-1))]),s("div",A,[s("div",D,"已选商品："+c(a(i).totalItems)+"件",1),s("div",F,"商品总金额：¥"+c(a(i).totalAmount),1)]),a(i).cartItems.length>0?(p(),m("div",T,[o(x,{data:a(i).cartItems,style:{width:"100%"}},{default:n(()=>[o(_,{label:"商品信息",width:"350"},{default:n(({row:t})=>[s("div",U,[o(h,{src:t.drug.image||a(y),class:"drug-image",fit:"cover"},null,8,["src"]),s("div",E,[s("div",G,c(t.drug.generic_name),1),s("div",H,c(t.drug.specification),1),t.drug.category===2?(p(),m("div",M,[o(b,{type:"danger",size:"small"},{default:n(()=>[...e[2]||(e[2]=[r("处方药",-1)])]),_:1})])):S("",!0)])])]),_:1}),o(_,{label:"单价",width:"120",align:"center"},{default:n(({row:t})=>{var l;return[s("div",O,"¥"+c(((l=t.drug.price)==null?void 0:l.toFixed(2))||"0.00"),1)]}),_:1}),o(_,{label:"数量",width:"180",align:"center"},{default:n(({row:t})=>[s("div",R,[o(u,{disabled:t.quantity<=1,onClick:l=>a(i).decreaseQuantity(t.drug.id)},{default:n(()=>[...e[3]||(e[3]=[r("-",-1)])]),_:1},8,["disabled","onClick"]),o(C,{modelValue:t.quantity,"onUpdate:modelValue":l=>t.quantity=l,modelModifiers:{number:!0},onChange:l=>a(i).updateQuantity(t.drug.id,t.quantity),type:"number",min:"1",max:t.drug.stock_quantity,class:"quantity-input"},null,8,["modelValue","onUpdate:modelValue","onChange","max"]),o(u,{onClick:l=>a(i).increaseQuantity(t.drug.id)},{default:n(()=>[...e[4]||(e[4]=[r("+",-1)])]),_:1},8,["onClick"])]),s("div",j,"库存: "+c(t.drug.stock_quantity)+"件",1)]),_:1}),o(_,{label:"小计",width:"120",align:"center"},{default:n(({row:t})=>[s("div",J,"¥"+c((t.drug.price*t.quantity).toFixed(2)),1)]),_:1}),o(_,{label:"操作",width:"100",align:"center"},{default:n(({row:t})=>[o(q,{content:"移除此商品",placement:"top"},{default:n(()=>[o(u,{type:"danger",icon:a(N),circle:"",onClick:l=>a(i).removeItem(t.drug.id)},null,8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])])):(p(),m("div",K,[s("img",{src:a(y),alt:"购物车为空",class:"empty-image"},null,8,L),e[6]||(e[6]=s("p",{class:"empty-text"},"您的购物车是空的",-1)),o(u,{type:"primary",onClick:k},{default:n(()=>[...e[5]||(e[5]=[r("去逛逛",-1)])]),_:1})])),s("div",P,[e[8]||(e[8]=s("div",{class:"checkout-notice"}," 结算功能将于后续版本开放，敬请期待！ ",-1)),o(u,{type:"primary",class:"checkout-button",disabled:a(i).cartItems.length===0||!a(f).isOpen,loading:a(i).loading,onClick:a(i).checkout},{default:n(()=>[...e[7]||(e[7]=[r(" 去结算 ",-1)])]),_:1},8,["disabled","loading","onClick"])])])}}},st=V(W,[["__scopeId","data-v-5e6dac2d"]]);export{st as default};
