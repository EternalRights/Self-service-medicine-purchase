import{_ as k,c as x,a as h,b,d as a,w as s,e as B,r as n,u as T,f as C,g as S,h as A,E as w,o as N,i as g}from"./index-CwdkBvns.js";import{u as R,m as L,a as V,r as y}from"./index-DmClzzOJ.js";const $={setup(){const t=A(),e=T(),r=C({username:"",password:""}),o={username:{required:y,minLength:V(3),maxLength:L(20)},password:{required:y,minLength:V(6),maxLength:L(20)}},d=R(o,r),i=S(!1);return{form:r,v$:d,loading:i,handleLogin:async()=>{if(await d.value.$validate()){i.value=!0;try{await e.userLogin({username:r.username,password:r.password}),w.success("登录成功"),t.push("/user/home")}catch(c){w.error("登录失败: "+(c.message||"用户名或密码错误"))}finally{i.value=!1}}},goToRegister:()=>{t.push("/auth/register")},goToAdminLogin:()=>{t.push("/auth/admin-login")}}}},E={class:"login-container"},U={class:"login-card"},M={class:"login-footer"};function q(t,e,r,o,d,i){const m=n("el-input"),l=n("el-form-item"),p=n("el-button"),u=n("el-link"),c=n("el-form");return N(),x("div",E,[h("div",U,[e[5]||(e[5]=b('<div class="login-header" data-v-9f9a3de0><div class="brand" data-v-9f9a3de0><div class="logo" data-v-9f9a3de0><i class="el-icon-first-aid-kit" data-v-9f9a3de0></i></div><h1 data-v-9f9a3de0>欢迎使用医药自助购</h1></div><p class="subtitle" data-v-9f9a3de0>安全、便捷的24小时自助购药服务</p></div>',1)),a(c,{class:"login-form",onSubmit:B(o.handleLogin,["prevent"])},{default:s(()=>{var v,_;return[a(l,{error:(v=o.v$.username.$errors[0])==null?void 0:v.$message},{default:s(()=>[a(m,{modelValue:o.form.username,"onUpdate:modelValue":e[0]||(e[0]=f=>o.form.username=f),placeholder:"用户名/手机号","prefix-icon":"User",onBlur:o.v$.username.$touch},null,8,["modelValue","onBlur"])]),_:1},8,["error"]),a(l,{error:(_=o.v$.password.$errors[0])==null?void 0:_.$message},{default:s(()=>[a(m,{modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=f=>o.form.password=f),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":"",onBlur:o.v$.password.$touch},null,8,["modelValue","onBlur"])]),_:1},8,["error"]),a(l,null,{default:s(()=>[a(p,{type:"primary",class:"login-btn",loading:o.loading,"native-type":"submit"},{default:s(()=>[...e[2]||(e[2]=[g(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),h("div",M,[a(u,{type:"primary",onClick:o.goToRegister},{default:s(()=>[...e[3]||(e[3]=[g("注册新账户",-1)])]),_:1},8,["onClick"]),a(u,{type:"primary",onClick:o.goToAdminLogin},{default:s(()=>[...e[4]||(e[4]=[g("管理员登录",-1)])]),_:1},8,["onClick"])])]}),_:1},8,["onSubmit"])])])}const z=k($,[["render",q],["__scopeId","data-v-9f9a3de0"]]);export{z as default};
