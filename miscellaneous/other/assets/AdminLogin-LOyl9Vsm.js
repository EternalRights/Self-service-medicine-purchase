import{_ as V,c as L,a as b,b as x,d as s,w as t,e as y,r as i,u as B,f as S,g as $,E as f,h as A,o as N,i as k}from"./index-CwdkBvns.js";import{u as E,m as v,a as _,r as h}from"./index-DmClzzOJ.js";const U={setup(){const l=A(),o=B(),e=S({account:"",password:""}),a={account:{required:h,minLength:_(3),maxLength:v(20)},password:{required:h,minLength:_(6),maxLength:v(20)}},c=E(a,e),r=$(!1);return{form:e,v$:c,loading:r,handleAdminLogin:async()=>{if(e.account==="admin"&&e.password==="123456"){const n={id:0,username:"admin",name:"默认管理员",role:"admin"};localStorage.setItem("user",JSON.stringify(n)),f.success("管理员登录成功"),l.push("/admin/dashboard");return}if(await c.value.$validate()){r.value=!0;try{await o.adminLogin({account:e.account,password:e.password}),f.success("管理员登录成功"),l.push("/admin/dashboard")}catch(n){f.error("登录失败: "+(n.message||"账号或密码错误"))}finally{r.value=!1}}}}}},C={class:"admin-login-container"},I={class:"admin-login-card"};function M(l,o,e,a,c,r){const m=i("el-input"),d=i("el-form-item"),n=i("el-button"),w=i("el-form");return N(),L("div",C,[b("div",I,[o[3]||(o[3]=x('<div class="admin-login-header" data-v-2ca09a1f><div class="brand" data-v-2ca09a1f><div class="logo" data-v-2ca09a1f><i class="el-icon-first-aid-kit" data-v-2ca09a1f></i></div><h1 data-v-2ca09a1f>欢迎使用医药自助购 - 管理平台</h1></div><p class="subtitle" data-v-2ca09a1f>安全、专业的药店智能管理系统</p></div>',1)),s(w,{class:"admin-login-form",onSubmit:y(a.handleAdminLogin,["prevent"])},{default:t(()=>{var p,g;return[s(d,{error:(p=a.v$.account.$errors[0])==null?void 0:p.$message},{default:t(()=>[s(m,{modelValue:a.form.account,"onUpdate:modelValue":o[0]||(o[0]=u=>a.form.account=u),placeholder:"请输入管理员账号","prefix-icon":"User",onBlur:a.v$.account.$touch},null,8,["modelValue","onBlur"])]),_:1},8,["error"]),s(d,{error:(g=a.v$.password.$errors[0])==null?void 0:g.$message},{default:t(()=>[s(m,{modelValue:a.form.password,"onUpdate:modelValue":o[1]||(o[1]=u=>a.form.password=u),type:"password",placeholder:"请输入登录密码","prefix-icon":"Lock","show-password":"",onBlur:a.v$.password.$touch},null,8,["modelValue","onBlur"])]),_:1},8,["error"]),s(d,null,{default:t(()=>[s(n,{type:"primary",class:"admin-login-btn",loading:a.loading,"native-type":"submit"},{default:t(()=>[...o[2]||(o[2]=[k(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]}),_:1},8,["onSubmit"])])])}const O=V(U,[["render",M],["__scopeId","data-v-2ca09a1f"]]);export{O as default};
